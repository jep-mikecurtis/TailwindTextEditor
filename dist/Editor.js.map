{"version":3,"sources":["Rapyd.js","html/html.js","helpers/tooltip.js","Editor.js"],"names":["Rapyd","props","methods","init","name","cb","bind","el","value","document","querySelector","innerText","innerHTML","mainContent","initValue","toolTip","target","tooltip","tooltipHandleBind","tooltips","querySelectorAll","forEach","addEventListener","e","tooltipHandleTag","dataset","tag","class","toggles","tooltipToggle","tagTyp","tagClass","insertClass","editor","selectionStart","startPos","endPos","selectionEnd","substring","length","formatText","toggleEl","getElementById","toggle","classList","contains","remove","add","Editor","key","preventDefault","start","end","keyBefore","content","setBody","split","newContent","i","push","join","renderHtml","calcNumbers","allowTab","handleTextarea"],"mappings":"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","file":"Editor.js","sourceRoot":"../src/js","sourcesContent":["class Rapyd {\n  props;\n\n  constructor(props = {}, methods = {}, init = null) {\n    this.props = props;\n\n    for (name in methods) {\n      this[name] = methods[name];\n    }\n\n    if (init) {\n      this.init(init);\n    }\n  }\n\n  init(cb) {\n    cb = cb.bind(this);\n    cb();\n  }\n\n  renderText(el, value) {\n    document.querySelector(el).innerText = value;\n  }\n\n  renderHtml(el, value) {\n    document.querySelector(el).innerHTML = value;\n  }\n}\n\nexport default Rapyd;\n","export default {\n  mainContent(initValue) {\n    return `\n        <div class=\"px-4 py-10\">\n          ${this.toolTip()}\n          <div class=\"flex flex-row-reverse\">\n            <div id=\"${this.target}_display\" class=\"flex-1 ml-4\"></div>\n              <div id=\"${\n                this.target\n              }_wrapper\" class=\"flex-1 relative flex text-xs border border-gray-800 rounded overflow-hidden shadow leading-loose\">\n                <div id=\"${\n                  this.target\n                }_numbers\" class=\"p-2 text-center bg-gray-100 border-r-2 border-blue-400 bg-gray-800 text-white\">\n              </div>\n\n              <textarea id=\"${\n                this.target\n              }_editor\" class=\"flex-1 p-2 outline-none resize-none\">${initValue}</textarea>\n            </div>\n          </div>\n        </div>\n      `;\n  },\n  toolTip() {\n    return `\n        <div class=\"mb-4 flex space-x-2\">\n          <div id=\"heading-dropdown\" class=\"relative\">\n            <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow toggle\" data-toggle=\"toggleHeading\">H</button>\n            <div class=\"hidden absolute z-20 p-4 bg-white flex flex-col space-y-4 mt-2 shadow border border-gray-300 rounded\" id=\"toggleHeading\">\n              <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip toggle\" data-toggle=\"toggleHeading\" data-tag=\"h1\" @click=\"show=false\">H1</button>\n              <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip toggle\" data-toggle=\"toggleHeading\" data-tag=\"h2\" @click=\"show=false\">H2</button>\n              <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip toggle\" data-toggle=\"toggleHeading\" data-tag=\"h3\" @click=\"show=false\">H3</button>\n            </div>\n          </div>\n          <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip\" data-tag=\"p\">p</button>\n          <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip\" data-tag=\"a\" data-class=\"text-blue-600\">a</button>\n          <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip\" data-tag=\"div\">div</button>\n          <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip\" data-tag=\"div\" data-class=\"flex\">flex</button>\n          <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip\" data-tag=\"button\" data-class=\"py-1 px-4 shadow rounded\">Button</button>\n        </div>\n      `;\n  },\n};\n","export default {\n  tooltip() {\n    this.tooltipHandleBind();\n  },\n  tooltipHandleBind() {\n    const tooltips = document.querySelectorAll(`.${this.target}_tooltip`);\n    tooltips.forEach((el) =>\n      el.addEventListener(\"click\", (e) => {\n        this.tooltipHandleTag(e.target.dataset.tag, e.target.dataset.class);\n      })\n    );\n\n    const toggles = document.querySelectorAll(\".toggle\");\n    toggles.forEach((el) => {\n      el.addEventListener(\"click\", (e) => this.tooltipToggle(e));\n    });\n  },\n  tooltipHandleTag(tagTyp, tagClass) {\n    let tag = \"\";\n    if (tagClass) {\n      const insertClass = `class='${tagClass}'`;\n      tag = `<${tagTyp} ${insertClass}>\\n\\n</${tagTyp}>`;\n    } else {\n      tag = `<${tagTyp}>\\n\\n</${tagTyp}>`;\n    }\n\n    if (this.editor.selectionStart || this.editor.selectionStart == \"0\") {\n      var startPos = this.editor.selectionStart;\n      var endPos = this.editor.selectionEnd;\n      this.editor.value =\n        this.editor.value.substring(0, startPos) +\n        tag +\n        this.editor.value.substring(endPos, this.editor.value.length);\n    } else {\n      this.editor.value += tag;\n    }\n\n    this.formatText();\n  },\n  tooltipToggle(e) {\n    const toggleEl = document.getElementById(e.target.dataset.toggle);\n\n    return toggleEl.classList.contains(\"hidden\")\n      ? toggleEl.classList.remove(\"hidden\")\n      : toggleEl.classList.add(\"hidden\");\n  },\n};\n","import Rapyd from \"./Rapyd\";\nimport mainContent from \"./html/html\";\nimport tooltip from \"./helpers/tooltip\";\n\nclass Editor extends Rapyd {\n  target;\n  editor = null;\n  initValue = \"\";\n\n  constructor(target) {\n    super({}, { ...mainContent, ...tooltip });\n\n    this.target = target;\n\n    this.init();\n  }\n\n  allowTab() {\n    this.editor.addEventListener(\n      \"keydown\",\n      function (e) {\n        if (e.key == \"Tab\") {\n          e.preventDefault();\n          var start = e.target.selectionStart;\n          var end = e.target.selectionEnd;\n\n          e.target.value =\n            e.target.value.substring(0, start) +\n            \"\\t\" +\n            e.target.value.substring(end);\n          e.target.selectionStart = e.target.selectionEnd = start + 1;\n        }\n      }.bind(this)\n    );\n  }\n\n  handleTextarea() {\n    this.editor.addEventListener(\n      \"keyup\",\n      function (e) {\n        this.keyBefore = e.target.value;\n        this.content = e.target.value;\n\n        this.setBody(this.content);\n      }.bind(this)\n    );\n  }\n\n  calcNumbers() {\n    let content = document\n      .getElementById(`${this.target}_editor`)\n      .value.split(\"\\n\");\n\n    let newContent = [];\n\n    if (content.length < 40) {\n      content.length = 40;\n    }\n\n    for (let i = 0; i < content.length; i++) {\n      newContent.push(`<p>${i + 1}</p>`);\n    }\n\n    document.getElementById(\n      `${this.target}_numbers`\n    ).innerHTML = newContent.join(\"\");\n  }\n\n  setBody(value) {\n    this.renderHtml(`#${this.target}_display`, value);\n    this.calcNumbers();\n  }\n\n  formatText() {\n    // let string = this.editor.value;\n    // string = string.replace(/\\n/g, '\\n    ');\n    // this.editor.value = string\n  }\n\n  init() {\n    const initValue = document.getElementById(this.target).dataset.value;\n\n    this.renderHtml(`#${this.target}`, this.mainContent(initValue));\n\n    this.calcNumbers();\n\n    this.tooltip();\n\n    this.editor = document.getElementById(`${this.target}_editor`);\n\n    this.allowTab();\n\n    this.handleTextarea();\n\n    this.setBody(this.editor.value);\n  }\n}\n\nnew Editor(\"app\");\nexport default Editor;\n"]}