{"version":3,"sources":["Rapyd.js","html/html.js","helpers/tooltip.js","Editor.js"],"names":["Rapyd","props","methods","init","name","cb","bind","el","value","document","querySelector","innerText","innerHTML","mainContent","toolTip","target","tooltip","tooltipHandleBind","tooltips","querySelectorAll","forEach","addEventListener","e","tooltipHandleTag","dataset","tag","class","toggles","tooltipToggle","tagTyp","tagClass","insertClass","editor","selectionStart","startPos","endPos","selectionEnd","substring","length","formatText","toggleEl","getElementById","toggle","classList","contains","remove","add","Editor","key","preventDefault","start","end","keyBefore","content","setBody","split","newContent","i","push","join","renderHtml","calcNumbers","allowTab","handleTextarea"],"mappings":"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","file":"Editor.js","sourceRoot":"../src/js","sourcesContent":["class Rapyd {\n  props;\n\n  constructor(props = {}, methods = {}, init = null) {\n    this.props = props;\n\n    for (name in methods) {\n      this[name] = methods[name];\n    }\n\n    if (init) {\n      this.init(init);\n    }\n  }\n\n  init(cb) {\n    cb = cb.bind(this);\n    cb();\n  }\n\n  renderText(el, value) {\n    document.querySelector(el).innerText = value;\n  }\n\n  renderHtml(el, value) {\n    document.querySelector(el).innerHTML = value;\n  }\n}\n\nexport default Rapyd;\n","export default {\n  mainContent() {\n    return `\n        <div class=\"px-4 py-10\">\n          ${this.toolTip()}\n          <div class=\"flex flex-row-reverse\">\n            <div id=\"${this.target}_display\" class=\"flex-1 ml-4\"></div>\n              <div id=\"${\n                this.target\n              }_wrapper\" class=\"flex-1 relative flex text-xs border border-gray-800 rounded overflow-hidden shadow leading-loose\">\n                <div id=\"${\n                  this.target\n                }_numbers\" class=\"p-2 text-center bg-gray-100 border-r-2 border-blue-400 bg-gray-800 text-white\">\n              </div>\n\n              <textarea id=\"${\n                this.target\n              }_editor\" class=\"flex-1 p-2 outline-none resize-none\"></textarea>\n            </div>\n          </div>\n        </div>\n      `;\n  },\n  toolTip() {\n    return `\n        <div class=\"mb-4 flex space-x-2\">\n          <div id=\"heading-dropdown\" class=\"relative\">\n            <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow toggle\" data-toggle=\"toggleHeading\">H</button>\n            <div class=\"hidden absolute z-20 p-4 bg-white flex flex-col space-y-4 mt-2 shadow border border-gray-300 rounded\" id=\"toggleHeading\">\n              <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip toggle\" data-toggle=\"toggleHeading\" data-tag=\"h1\" @click=\"show=false\">H1</button>\n              <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip toggle\" data-toggle=\"toggleHeading\" data-tag=\"h2\" @click=\"show=false\">H2</button>\n              <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip toggle\" data-toggle=\"toggleHeading\" data-tag=\"h3\" @click=\"show=false\">H3</button>\n            </div>\n          </div>\n          <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip\" data-tag=\"p\">p</button>\n          <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip\" data-tag=\"a\" data-class=\"text-blue-600\">a</button>\n          <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip\" data-tag=\"div\">div</button>\n          <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip\" data-tag=\"div\" data-class=\"flex\">flex</button>\n          <button class=\"border border-gray-600 py-1 px-3 text-sm rounded shadow ${this.target}_tooltip\" data-tag=\"button\" data-class=\"py-1 px-4 shadow rounded\">Button</button>\n        </div>\n      `;\n  },\n};\n","export default {\n  tooltip() {\n    this.tooltipHandleBind();\n  },\n  tooltipHandleBind() {\n    const tooltips = document.querySelectorAll(`.${this.target}_tooltip`);\n    tooltips.forEach((el) =>\n      el.addEventListener(\"click\", (e) => {\n        this.tooltipHandleTag(e.target.dataset.tag, e.target.dataset.class);\n      })\n    );\n\n    const toggles = document.querySelectorAll(\".toggle\");\n    toggles.forEach((el) => {\n      el.addEventListener(\"click\", (e) => this.tooltipToggle(e));\n    });\n  },\n  tooltipHandleTag(tagTyp, tagClass) {\n    let tag = \"\";\n    if (tagClass) {\n      const insertClass = `class='${tagClass}'`;\n      tag = `<${tagTyp} ${insertClass}>\\n\\n</${tagTyp}>`;\n    } else {\n      tag = `<${tagTyp}>\\n\\n</${tagTyp}>`;\n    }\n\n    if (this.editor.selectionStart || this.editor.selectionStart == \"0\") {\n      var startPos = this.editor.selectionStart;\n      var endPos = this.editor.selectionEnd;\n      this.editor.value =\n        this.editor.value.substring(0, startPos) +\n        tag +\n        this.editor.value.substring(endPos, this.editor.value.length);\n    } else {\n      this.editor.value += tag;\n    }\n\n    this.formatText();\n  },\n  tooltipToggle(e) {\n    const toggleEl = document.getElementById(e.target.dataset.toggle);\n\n    return toggleEl.classList.contains(\"hidden\")\n      ? toggleEl.classList.remove(\"hidden\")\n      : toggleEl.classList.add(\"hidden\");\n  },\n};\n","import Rapyd from \"./Rapyd\";\nimport mainContent from \"./html/html\";\nimport tooltip from \"./helpers/tooltip\";\n\nclass Editor extends Rapyd {\n  target;\n  editor = null;\n\n  constructor(target) {\n    super({}, { ...mainContent, ...tooltip });\n\n    this.target = target;\n\n    this.init();\n  }\n\n  allowTab() {\n    this.editor.addEventListener(\n      \"keydown\",\n      function (e) {\n        if (e.key == \"Tab\") {\n          e.preventDefault();\n          var start = e.target.selectionStart;\n          var end = e.target.selectionEnd;\n\n          e.target.value =\n            e.target.value.substring(0, start) +\n            \"\\t\" +\n            e.target.value.substring(end);\n          e.target.selectionStart = e.target.selectionEnd = start + 1;\n        }\n      }.bind(this)\n    );\n  }\n\n  handleTextarea() {\n    this.editor.addEventListener(\n      \"keyup\",\n      function (e) {\n        this.keyBefore = e.target.value;\n        this.content = e.target.value;\n\n        this.setBody(this.content);\n      }.bind(this)\n    );\n  }\n\n  calcNumbers() {\n    let content = document\n      .getElementById(`${this.target}_editor`)\n      .value.split(\"\\n\");\n\n    let newContent = [];\n\n    if (content.length < 40) {\n      content.length = 40;\n    }\n\n    for (let i = 0; i < content.length; i++) {\n      newContent.push(`<p>${i + 1}</p>`);\n    }\n\n    document.getElementById(\n      `${this.target}_numbers`\n    ).innerHTML = newContent.join(\"\");\n  }\n\n  setBody(value) {\n    this.renderHtml(`#${this.target}_display`, value);\n    this.calcNumbers();\n  }\n\n  formatText() {\n    // let string = this.editor.value;\n    // string = string.replace(/\\n/g, '\\n    ');\n    // this.editor.value = string\n  }\n\n  init() {\n    this.renderHtml(`#${this.target}`, this.mainContent());\n\n    this.calcNumbers();\n\n    this.tooltip();\n\n    this.editor = document.getElementById(`${this.target}_editor`);\n\n    this.allowTab();\n\n    this.handleTextarea();\n\n    this.setBody(this.editor.value);\n  }\n}\n\nexport default Editor;\n"]}